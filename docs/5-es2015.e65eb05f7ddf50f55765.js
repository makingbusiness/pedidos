(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"h2N+":function(l,n,u){"use strict";u.r(n);var o=u("8Y7J");class t{}var i=u("pMnS"),r=u("MKJQ"),e=u("sZkV"),s=u("0CBe"),c=u("SVse"),a=u("B4d+"),b=u("mrSG"),p=u("GPUG"),d=u("c14U"),h=u("AytR"),g=u("bN2e");class m{constructor(l,n,u,o){this.productoService=l,this.ruta=n,this.cartService=u,this.toastController=o,this.productos=[],this.instancias=[],this.subcategoria="",this.slideOpts={slidesPerView:2.3,grabCursor:!0,freeMode:!0},l.paginaActual=0,this.segmentos=n.url.split("/"),this.pagina=this.segmentos[this.segmentos.length-1]}ngOnInit(){console.log(this.ruta),this.cargarProductos(),this.productoService.getInstancias("1",this.pagina).subscribe(l=>{this.instancias=l.instancias})}detalleProducto(l){this.ruta.navigate(["/productos/"+this.pagina+"/"+l])}mostrarCarro(){this.ruta.navigate(["/carro"])}cargarProductos(l){console.log("Cargando productos...."),this.rutaImg=h.a.url_imagenes,this.segmentos=this.ruta.url.split("/"),0==this.subcategoria.length?this.productoService.getProductos(this.pagina).subscribe(n=>{if(this.producto=n.productos,this.producto){if(0==this.producto.length)return l.target.disabled=!0,void l.target.complete();this.productos.push(...this.producto)}else console.log("No hay productos para",this.pagina);l&&l.target.complete()},l=>{console.log(l)}):this.productoService.getProductosInstancia(this.subcategoria).subscribe(n=>{if(this.producto=n.productos,this.producto){if(0==this.producto.length)return l.target.disabled=!0,void l.target.complete();this.productos.push(...this.producto)}l&&l.target.complete()},l=>{console.log(l)})}slideTap(l){this.productos=[],this.pagina=l.CodInst.toString(),this.subcategoria=l.CodInst.toString(),this.cargarProductos()}agregar(l){return b.__awaiter(this,void 0,void 0,(function*(){this.carrito=new g.a(l.CodProd,l.Descrip,1,l.Precio,Math.round(l.Precio*l.Impuesto/100),l.ImgPrincipal),this.cartService.agregar(this.carrito);const n=this.toastController.create({message:"Producto agregado",duration:500,position:"bottom",color:"dark"});(yield n).present()}))}}var k=u("iInd"),f=o.ob({encapsulation:0,styles:[["ion-slides[_ngcontent-%COMP%]{height:60px;background-color:#000;color:#fff}ion-img[_ngcontent-%COMP%]{max-width:100px;background-color:#e6e6e6;border-radius:5%;padding:8px}"]],data:{}});function x(l){return o.Kb(0,[(l()(),o.qb(0,0,null,null,3,"ion-button",[["color","dark"],["slot","end"]],null,[[null,"click"]],(function(l,n,u){var o=!0;return"click"===n&&(o=!1!==l.component.mostrarCarro()&&o),o}),r.I,r.c)),o.pb(1,49152,null,0,e.j,[o.h,o.k,o.x],{color:[0,"color"]},null),(l()(),o.qb(2,0,null,0,1,"ion-icon",[["name","cart-outline"]],null,null,null,r.T,r.n)),o.pb(3,49152,null,0,e.B,[o.h,o.k,o.x],{name:[0,"name"]},null)],(function(l,n){l(n,1,0,"dark"),l(n,3,0,"cart-outline")}),null)}function q(l){return o.Kb(0,[(l()(),o.qb(0,0,null,null,4,"ion-slide",[],null,null,null,r.hb,r.B)),o.pb(1,49152,null,0,e.mb,[o.h,o.k,o.x],null,null),(l()(),o.qb(2,0,null,0,2,"ion-label",[["class","condensada"]],null,[[null,"click"]],(function(l,n,u){var o=!0;return"click"===n&&(o=!1!==l.component.slideTap(l.context.$implicit)&&o),o}),r.Z,r.t)),o.pb(3,49152,null,0,e.M,[o.h,o.k,o.x],null,null),(l()(),o.Ib(4,0,["",""]))],null,(function(l,n){l(n,4,0,n.context.$implicit.Descrip)}))}function v(l){return o.Kb(0,[(l()(),o.qb(0,0,null,null,25,"ion-col",[["size","12"]],null,null,null,r.P,r.j)),o.pb(1,49152,null,0,e.s,[o.h,o.k,o.x],{size:[0,"size"]},null),(l()(),o.qb(2,0,null,0,23,"ion-row",[],null,null,null,r.eb,r.y)),o.pb(3,49152,null,0,e.fb,[o.h,o.k,o.x],null,null),(l()(),o.qb(4,0,null,0,4,"ion-col",[["size","4"]],null,null,null,r.P,r.j)),o.pb(5,49152,null,0,e.s,[o.h,o.k,o.x],{size:[0,"size"]},null),(l()(),o.qb(6,0,null,0,2,"ion-img",[],null,[[null,"click"]],(function(l,n,u){var o=!0;return"click"===n&&(o=!1!==l.component.detalleProducto(l.context.$implicit.CodProd)&&o),o}),r.U,r.o)),o.pb(7,49152,null,0,e.C,[o.h,o.k,o.x],{src:[0,"src"]},null),o.Eb(8,1),(l()(),o.qb(9,0,null,0,9,"ion-col",[["size","5"]],null,null,null,r.P,r.j)),o.pb(10,49152,null,0,e.s,[o.h,o.k,o.x],{size:[0,"size"]},null),(l()(),o.qb(11,0,null,0,7,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),o.qb(12,0,null,null,1,"h5",[["class","card-title referencia"]],null,null,null,null,null)),(l()(),o.Ib(13,null,["",""])),(l()(),o.qb(14,0,null,null,1,"p",[["class","card-text condensada"]],null,null,null,null,null)),(l()(),o.Ib(15,null,["",""])),(l()(),o.qb(16,0,null,null,2,"ion-button",[["class","condensada"],["color","dark"],["shape","round"]],null,[[null,"click"]],(function(l,n,u){var o=!0;return"click"===n&&(o=!1!==l.component.agregar(l.context.$implicit)&&o),o}),r.I,r.c)),o.pb(17,49152,null,0,e.j,[o.h,o.k,o.x],{color:[0,"color"],shape:[1,"shape"]},null),(l()(),o.Ib(-1,0,["Agregar al carrito"])),(l()(),o.qb(19,0,null,0,6,"ion-col",[["size","3"]],null,null,null,r.P,r.j)),o.pb(20,49152,null,0,e.s,[o.h,o.k,o.x],{size:[0,"size"]},null),(l()(),o.qb(21,0,null,0,4,"p",[["class","card-text"]],null,null,null,null,null)),(l()(),o.qb(22,0,null,null,3,"small",[["class","text-muted"]],null,null,null,null,null)),(l()(),o.Ib(23,null,["",""])),o.Eb(24,1),o.Eb(25,1)],(function(l,n){l(n,1,0,"12"),l(n,5,0,"4");var u=o.ub(1,"",o.Jb(n,7,0,l(n,8,0,o.Cb(n.parent,0),n.context.$implicit)),"");l(n,7,0,u),l(n,10,0,"5"),l(n,17,0,"dark","round"),l(n,20,0,"3")}),(function(l,n){l(n,13,0,n.context.$implicit.CodProd),l(n,15,0,n.context.$implicit.Descrip);var u=o.Jb(n,23,0,l(n,25,0,o.Cb(n.parent,1),o.Jb(n,23,0,l(n,24,0,o.Cb(n.parent,2),n.context.$implicit.Precio*(1+n.context.$implicit.Impuesto/100)))));l(n,23,0,u)}))}function P(l){return o.Kb(0,[o.Db(0,s.a,[]),o.Db(0,c.c,[o.s]),o.Db(0,a.a,[]),(l()(),o.qb(3,0,null,null,16,"ion-header",[],null,null,null,r.S,r.m)),o.pb(4,49152,null,0,e.A,[o.h,o.k,o.x],null,null),(l()(),o.qb(5,0,null,0,10,"ion-toolbar",[["color","dark"]],null,null,null,r.lb,r.F)),o.pb(6,49152,null,0,e.yb,[o.h,o.k,o.x],{color:[0,"color"]},null),(l()(),o.qb(7,0,null,0,3,"ion-buttons",[["defaultHref","/"],["slot","start"]],null,null,null,r.J,r.d)),o.pb(8,49152,null,0,e.k,[o.h,o.k,o.x],null,null),(l()(),o.qb(9,0,null,0,1,"ion-menu-button",[["autoHide","false"],["menuId","menu"]],null,null,null,r.bb,r.w)),o.pb(10,49152,null,0,e.Q,[o.h,o.k,o.x],{autoHide:[0,"autoHide"]},null),(l()(),o.qb(11,0,null,0,2,"ion-title",[],null,null,null,r.kb,r.E)),o.pb(12,49152,null,0,e.wb,[o.h,o.k,o.x],null,null),(l()(),o.Ib(-1,0,["Lista de productos"])),(l()(),o.fb(16777216,null,0,1,null,x)),o.pb(15,16384,null,0,c.k,[o.N,o.J],{ngIf:[0,"ngIf"]},null),(l()(),o.qb(16,0,null,0,3,"ion-slides",[],null,null,null,r.ib,r.C)),o.pb(17,49152,null,0,e.nb,[o.h,o.k,o.x],{options:[0,"options"]},null),(l()(),o.fb(16777216,null,0,1,null,q)),o.pb(19,278528,null,0,c.j,[o.N,o.J,o.q],{ngForOf:[0,"ngForOf"]},null),(l()(),o.qb(20,0,null,null,18,"ion-content",[],null,null,null,r.Q,r.k)),o.pb(21,49152,null,0,e.t,[o.h,o.k,o.x],{fullscreen:[0,"fullscreen"]},null),(l()(),o.qb(22,0,null,0,6,"ion-header",[["collapse","condense"]],null,null,null,r.S,r.m)),o.pb(23,49152,null,0,e.A,[o.h,o.k,o.x],{collapse:[0,"collapse"]},null),(l()(),o.qb(24,0,null,0,4,"ion-toolbar",[],null,null,null,r.lb,r.F)),o.pb(25,49152,null,0,e.yb,[o.h,o.k,o.x],null,null),(l()(),o.qb(26,0,null,0,2,"ion-title",[["size","large"]],null,null,null,r.kb,r.E)),o.pb(27,49152,null,0,e.wb,[o.h,o.k,o.x],{size:[0,"size"]},null),(l()(),o.Ib(-1,0,["Blank"])),(l()(),o.qb(29,0,null,0,9,"ion-grid",[],null,null,null,r.R,r.l)),o.pb(30,49152,null,0,e.z,[o.h,o.k,o.x],null,null),(l()(),o.qb(31,0,null,0,7,"ion-row",[],null,null,null,r.eb,r.y)),o.pb(32,49152,null,0,e.fb,[o.h,o.k,o.x],null,null),(l()(),o.fb(16777216,null,0,1,null,v)),o.pb(34,278528,null,0,c.j,[o.N,o.J,o.q],{ngForOf:[0,"ngForOf"]},null),(l()(),o.qb(35,0,null,0,3,"ion-infinite-scroll",[["threshold","150px"]],null,[[null,"ionInfinite"]],(function(l,n,u){var o=!0;return"ionInfinite"===n&&(o=!1!==l.component.cargarProductos(u)&&o),o}),r.W,r.p)),o.pb(36,49152,null,0,e.D,[o.h,o.k,o.x],{threshold:[0,"threshold"]},null),(l()(),o.qb(37,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"],["loadingText","Cargando ..."]],null,null,null,r.V,r.q)),o.pb(38,49152,null,0,e.E,[o.h,o.k,o.x],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null)],(function(l,n){var u=n.component;l(n,6,0,"dark"),l(n,10,0,"false"),l(n,15,0,u.cartService.carroCompras.length>0),l(n,17,0,u.slideOpts),l(n,19,0,u.instancias),l(n,21,0,!0),l(n,23,0,"condense"),l(n,27,0,"large"),l(n,34,0,u.productos),l(n,36,0,"150px"),l(n,38,0,"bubbles","Cargando ...")}),null)}function I(l){return o.Kb(0,[(l()(),o.qb(0,0,null,null,1,"app-productos",[],null,null,null,P,f)),o.pb(1,114688,null,0,m,[p.a,k.m,d.a,e.Jb],null,null)],(function(l,n){l(n,1,0)}),null)}var A=o.mb("app-productos",m,I,{},{},[]),C=u("s7LF");class z{}var S=u("j1ZV"),w=u("iTUp");u.d(n,"ProductosPageModuleNgFactory",(function(){return j}));var j=o.nb(t,[],(function(l){return o.zb([o.Ab(512,o.j,o.Y,[[8,[i.a,A]],[3,o.j],o.v]),o.Ab(4608,c.m,c.l,[o.s,[2,c.s]]),o.Ab(4608,C.i,C.i,[]),o.Ab(4608,e.b,e.b,[o.x,o.g]),o.Ab(4608,e.Db,e.Db,[e.b,o.j,o.p]),o.Ab(4608,e.Hb,e.Hb,[e.b,o.j,o.p]),o.Ab(1073742336,c.b,c.b,[]),o.Ab(1073742336,C.h,C.h,[]),o.Ab(1073742336,C.c,C.c,[]),o.Ab(1073742336,e.Ab,e.Ab,[]),o.Ab(1073742336,k.n,k.n,[[2,k.s],[2,k.m]]),o.Ab(1073742336,z,z,[]),o.Ab(1073742336,S.a,S.a,[]),o.Ab(1073742336,w.a,w.a,[]),o.Ab(1073742336,t,t,[]),o.Ab(1024,k.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);